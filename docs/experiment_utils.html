---

title: Experiment Utils


keywords: fastai
sidebar: home_sidebar

summary: "Helper functions for querying and retrieving results from past experiments"
description: "Helper functions for querying and retrieving results from past experiments"
nb_path: "nbs/utils/experiment_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utils/experiment_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">hpsearch.examples.dummy_experiment_manager</span> <span class="kn">import</span> <span class="p">(</span><span class="n">DummyExperimentManager</span><span class="p">,</span> 
                                                        <span class="n">run_multiple_experiments</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">hpsearch.examples.complex_dummy_experiment_manager</span> <span class="kn">import</span> <span class="n">generate_data</span><span class="p">,</span> <span class="n">init_em</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_experiment_data">get_experiment_data<a class="anchor-link" href="#get_experiment_data"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_data" class="doc_header"><code>get_experiment_data</code><a href="hpsearch/utils/experiment_utils.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_data</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Returns data stored from previous experiments in the form DataFrame.</p>
<p>If path_experiments is not given, it uses the default one.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="generate_data_exp_utils">generate_data_exp_utils<a class="anchor-link" href="#generate_data_exp_utils"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_data_exp_utils" class="doc_header"><code>generate_data_exp_utils</code><a href="hpsearch/tests/utils/test_experiment_utils.py#L21" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_data_exp_utils</code>(<strong><code>name_folder</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">generate_data_exp_utils</span> <span class="p">(</span><span class="n">name_folder</span><span class="p">):</span>
    <span class="n">path_experiments</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;test_</span><span class="si">{</span><span class="n">name_folder</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">manager_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path_experiments</span><span class="si">}</span><span class="s1">/managers&#39;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">DummyExperimentManager</span> <span class="p">(</span><span class="n">path_experiments</span><span class="o">=</span><span class="n">path_experiments</span><span class="p">,</span> <span class="n">manager_path</span><span class="o">=</span><span class="n">manager_path</span><span class="p">,</span>
                                 <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">()</span>
    <span class="n">run_multiple_experiments</span><span class="p">(</span><span class="n">em</span><span class="o">=</span><span class="n">em</span><span class="p">,</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">values_to_explore</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span> <span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">]))</span>
    <span class="n">run_multiple_experiments</span><span class="p">(</span><span class="n">em</span><span class="o">=</span><span class="n">em</span><span class="p">,</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span>
                             <span class="n">values_to_explore</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span> <span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">em</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="remove_defaults">remove_defaults<a class="anchor-link" href="#remove_defaults"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_defaults" class="doc_header"><code>remove_defaults</code><a href="hpsearch/utils/experiment_utils.py#L31" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_defaults</code>(<strong><code>parameters</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="query">query<a class="anchor-link" href="#query"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="query" class="doc_header"><code>query</code><a href="hpsearch/utils/experiment_utils.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>query</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>intersection</code></strong>=<em><code>False</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>min_results</code></strong>=<em><code>0</code></em>, <strong><code>classes</code></strong>=<em><code>None</code></em>, <strong><code>parameters_fixed</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_variable</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_all</code></strong>=<em><code>[]</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>output</code></strong>=<em><code>'all'</code></em>, <strong><code>ascending</code></strong>=<em><code>False</code></em>, <strong><code>suffix_test_set</code></strong>=<em><code>None</code></em>, <strong><code>stats</code></strong>=<em><code>['mean', 'median', 'rank', 'min', 'max', 'std']</code></em>, <strong><code>query_other_parameters</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="summarize_results">summarize_results<a class="anchor-link" href="#summarize_results"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summarize_results" class="doc_header"><code>summarize_results</code><a href="hpsearch/utils/experiment_utils.py#L119" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summarize_results</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>intersection</code></strong>=<em><code>False</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>min_results</code></strong>=<em><code>0</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>, <strong><code>parameters</code></strong>=<em><code>None</code></em>, <strong><code>output</code></strong>=<em><code>'all'</code></em>, <strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>ascending</code></strong>=<em><code>False</code></em>, <strong><code>suffix_test_set</code></strong>=<em><code>None</code></em>, <strong><code>stats</code></strong>=<em><code>['mean', 'median', 'rank', 'min', 'max', 'std']</code></em>)</p>
</blockquote>
<p>Obtains summary scores for the desired list of experiments. Uses the experiment_data csv for that purpose</p>
<p>Example use:</p>

<pre><code>- restricting class_ids:
    summarize_results(class_ids= [1058,1059],suffix_results='_m3');

- with a predetermined list of class_ids:
    summarize_results(class_ids='qualified',suffix_results='_m3',min_results=96);</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="summary">summary<a class="anchor-link" href="#summary"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summary" class="doc_header"><code>summary</code><a href="hpsearch/utils/experiment_utils.py#L232" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summary</code>(<strong><code>df</code></strong>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>score</code></strong>=<em><code>None</code></em>, <strong><code>compact</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_parameters_columns">get_parameters_columns<a class="anchor-link" href="#get_parameters_columns"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_columns" class="doc_header"><code>get_parameters_columns</code><a href="hpsearch/utils/experiment_utils.py#L244" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_columns</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_experiment_parameters">get_experiment_parameters<a class="anchor-link" href="#get_experiment_parameters"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_parameters" class="doc_header"><code>get_experiment_parameters</code><a href="hpsearch/utils/experiment_utils.py#L251" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_parameters</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_scores_columns">get_scores_columns<a class="anchor-link" href="#get_scores_columns"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scores_columns" class="doc_header"><code>get_scores_columns</code><a href="hpsearch/utils/experiment_utils.py#L255" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scores_columns</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Determine the columnns that provide evaluation scores.</p>
<p>We assume that they start with the class number, and that the other columns
do not start with a digit.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_scores_columns" class="doc_header"><code>test_get_scores_columns</code><a href="hpsearch/tests/utils/test_experiment_utils.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_scores_columns</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_scores_columns</span> <span class="p">():</span>
    <span class="n">path_experiments</span> <span class="o">=</span> <span class="s1">&#39;test_get_scores_columns&#39;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data</span> <span class="p">(</span><span class="n">path_experiments</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    
    <span class="c1"># ************************************************************</span>
    <span class="c1"># First usage example: we do not indicate the name of the score</span>
    <span class="c1"># ************************************************************</span>
    <span class="k">assert</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;0_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;0_test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;0_finished&#39;</span><span class="p">,</span> 
                                     <span class="s1">&#39;1_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;1_test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;1_finished&#39;</span><span class="p">,</span> 
                                     <span class="s1">&#39;2_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;2_test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;2_finished&#39;</span><span class="p">,</span> 
                                     <span class="s1">&#39;3_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;3_test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;3_finished&#39;</span><span class="p">,</span> 
                                     <span class="s1">&#39;4_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;4_test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;4_finished&#39;</span><span class="p">]</span>
    
    <span class="c1"># ************************************************************</span>
    <span class="c1"># Second usage: we indicate the name of the score</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">class_ids</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">suffix_results</span><span class="o">=</span><span class="s1">&#39;_validation_accuracy&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;0_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;1_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;2_validation_accuracy&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;3_validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;4_validation_accuracy&#39;</span><span class="p">]</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_scores_columns</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_get_scores_columns
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_experiment_scores">get_experiment_scores<a class="anchor-link" href="#get_experiment_scores"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_scores" class="doc_header"><code>get_experiment_scores</code><a href="hpsearch/utils/experiment_utils.py#L277" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_scores</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>, <strong><code>remove_suffix</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_scores_names">get_scores_names<a class="anchor-link" href="#get_scores_names"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scores_names" class="doc_header"><code>get_scores_names</code><a href="hpsearch/utils/experiment_utils.py#L284" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scores_names</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>, <strong><code>experiment</code></strong>=<em><code>None</code></em>, <strong><code>only_valid</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Determine the names of the scores included in experiment data.</p>
<p>We assume that the score columns start with the class number, and that the other columns do not start with a digit.</p>
<p>If run_number is provided, we provide the scores stored for that run number. If, in addition to this,
experiment is provided, and only_valid=True, we provide only the scores that are not NaN for the given
experiment number.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_scores_names" class="doc_header"><code>test_get_scores_names</code><a href="hpsearch/tests/utils/test_experiment_utils.py#L58" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_scores_names</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_scores_names</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;get_scores_names&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">scores_names</span> <span class="o">=</span> <span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">scores_names</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">scores_names</span><span class="o">=</span><span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">scores_names</span><span class="p">))</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>

    <span class="c1"># test when only some scores are valid</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;3_test_accuracy&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">scores_names</span><span class="o">=</span><span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">scores_names</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_scores_names</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_monitored_training_metrics">get_monitored_training_metrics<a class="anchor-link" href="#get_monitored_training_metrics"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_monitored_training_metrics" class="doc_header"><code>get_monitored_training_metrics</code><a href="hpsearch/utils/experiment_utils.py#L310" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_monitored_training_metrics</code>(<strong><code>experiment</code></strong>, <strong><code>run_number</code></strong>=<em><code>0</code></em>, <strong><code>history_file_name</code></strong>=<em><code>'model_history.pk'</code></em>, <strong><code>path_results</code></strong>=<em><code>None</code></em>, <strong><code>root_path</code></strong>=<em><code>None</code></em>, <strong><code>root_folder</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_monitored_training_metrics" class="doc_header"><code>test_get_monitored_training_metrics</code><a href="hpsearch/tests/utils/test_experiment_utils.py#L80" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_monitored_training_metrics</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_monitored_training_metrics</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;get_monitored_training_metrics&#39;</span><span class="p">)</span>
    
    <span class="n">monitored_metrics</span> <span class="o">=</span> <span class="n">get_monitored_training_metrics</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">monitored_metrics</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">monitored_metrics</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_monitored_training_metrics</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="find_rows_with_parameters_dict">find_rows_with_parameters_dict<a class="anchor-link" href="#find_rows_with_parameters_dict"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_rows_with_parameters_dict" class="doc_header"><code>find_rows_with_parameters_dict</code><a href="hpsearch/utils/experiment_utils.py#L323" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_rows_with_parameters_dict</code>(<strong><code>experiment_data</code></strong>, <strong><code>parameters_dict</code></strong>, <strong><code>create_if_not_exists</code></strong>=<em><code>True</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>ignore_keys</code></strong>=<em><code>[]</code></em>, <strong><code>precision</code></strong>=<em><code>1e-10</code></em>)</p>
</blockquote>
<p>Finds rows that match parameters. If the dataframe doesn't have any parameter with that name, a new column is created and changed_dataframe is set to True.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_classes_with_results">get_classes_with_results<a class="anchor-link" href="#get_classes_with_results"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_classes_with_results" class="doc_header"><code>get_classes_with_results</code><a href="hpsearch/utils/experiment_utils.py#L368" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_classes_with_results</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Gets the list of class_ids for whom there are results in experiment_data.</p>
<p>Example usage with summarize_results:
    import hpsearch.utils.vc_experiment_utils as ut
    d=ut.summarize_results(class_ids='qualified',suffix_results='_auc_roc', min_results=10);
    ch=ut.get_classes_with_results(d['original'].loc[d['mean'].index],suffix_results='_auc_roc');</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_parameters_unique">get_parameters_unique<a class="anchor-link" href="#get_parameters_unique"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_unique" class="doc_header"><code>get_parameters_unique</code><a href="hpsearch/utils/experiment_utils.py#L385" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_unique</code>(<strong><code>df</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="compact_parameters">compact_parameters<a class="anchor-link" href="#compact_parameters"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compact_parameters" class="doc_header"><code>compact_parameters</code><a href="hpsearch/utils/experiment_utils.py#L393" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compact_parameters</code>(<strong><code>df</code></strong>, <strong><code>number_characters</code></strong>=<em><code>1</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="replace_with_default_values">replace_with_default_values<a class="anchor-link" href="#replace_with_default_values"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_with_default_values" class="doc_header"><code>replace_with_default_values</code><a href="hpsearch/utils/experiment_utils.py#L402" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_with_default_values</code>(<strong><code>df</code></strong>, <strong><code>parameters</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_replace_with_default_values" class="doc_header"><code>test_replace_with_default_values</code><a href="hpsearch/tests/utils/test_experiment_utils.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_replace_with_default_values</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_replace_with_default_values</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;replace_with_default_values&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">df</span><span class="o">=</span><span class="n">replace_with_default_values</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">epochs</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="p">([</span><span class="mf">5.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="mf">10.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="mf">100.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_replace_with_default_values</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

