---

title: Experiment Utils


keywords: fastai
sidebar: home_sidebar

summary: "Helper functions for querying and retrieving results from past experiments"
description: "Helper functions for querying and retrieving results from past experiments"
nb_path: "nbs/utils/experiment_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utils/experiment_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_defaults" class="doc_header"><code>remove_defaults</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L22" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_defaults</code>(<strong><code>parameters</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="query" class="doc_header"><code>query</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L31" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>query</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>intersection</code></strong>=<em><code>False</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>min_results</code></strong>=<em><code>0</code></em>, <strong><code>classes</code></strong>=<em><code>None</code></em>, <strong><code>parameters_fixed</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_variable</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_all</code></strong>=<em><code>[]</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>output</code></strong>=<em><code>'all'</code></em>, <strong><code>ascending</code></strong>=<em><code>False</code></em>, <strong><code>suffix_test_set</code></strong>=<em><code>None</code></em>, <strong><code>stats</code></strong>=<em><code>['mean', 'median', 'rank', 'min', 'max', 'std']</code></em>, <strong><code>query_other_parameters</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_data" class="doc_header"><code>get_experiment_data</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L97" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_data</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Returns data stored from previous experiments in the form DataFrame.</p>
<p>If path_experiments is not given, it uses the default one.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summarize_results" class="doc_header"><code>summarize_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L116" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summarize_results</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>intersection</code></strong>=<em><code>False</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>min_results</code></strong>=<em><code>0</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>, <strong><code>parameters</code></strong>=<em><code>None</code></em>, <strong><code>output</code></strong>=<em><code>'all'</code></em>, <strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>ascending</code></strong>=<em><code>False</code></em>, <strong><code>suffix_test_set</code></strong>=<em><code>None</code></em>, <strong><code>stats</code></strong>=<em><code>['mean', 'median', 'rank', 'min', 'max', 'std']</code></em>)</p>
</blockquote>
<p>Obtains summary scores for the desired list of experiments. Uses the experiment_data csv for that purpose</p>
<p>Example use:</p>

<pre><code>- restricting class_ids:
    summarize_results(class_ids= [1058,1059],suffix_results='_m3');

- with a predetermined list of class_ids:
    summarize_results(class_ids='qualified',suffix_results='_m3',min_results=96);</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summary" class="doc_header"><code>summary</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L229" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summary</code>(<strong><code>df</code></strong>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>score</code></strong>=<em><code>None</code></em>, <strong><code>compact</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_columns" class="doc_header"><code>get_parameters_columns</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L240" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_columns</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_parameters" class="doc_header"><code>get_experiment_parameters</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L246" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_parameters</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scores_columns" class="doc_header"><code>get_scores_columns</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L249" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scores_columns</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Determine the columnns that provide evaluation scores. We assume that they start with the class number, and that the other columns do not start with a digit</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_scores" class="doc_header"><code>get_experiment_scores</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L265" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_scores</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>, <strong><code>remove_suffix</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_rows_with_parameters_dict" class="doc_header"><code>find_rows_with_parameters_dict</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L273" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_rows_with_parameters_dict</code>(<strong><code>experiment_data</code></strong>, <strong><code>parameters_dict</code></strong>, <strong><code>create_if_not_exists</code></strong>=<em><code>True</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>ignore_keys</code></strong>=<em><code>[]</code></em>, <strong><code>precision</code></strong>=<em><code>1e-10</code></em>)</p>
</blockquote>
<p>Finds rows that match parameters. If the dataframe doesn't have any parameter with that name, a new column is created and changed_dataframe is set to True.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_classes_with_results" class="doc_header"><code>get_classes_with_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L318" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_classes_with_results</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>suffix_results</code></strong>=<em><code>''</code></em>, <strong><code>class_ids</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Gets the list of class_ids for whom there are results in experiment_data.</p>
<p>Example usage with summarize_results:
    import hpsearch.utils.vc_experiment_utils as ut
    d=ut.summarize_results(class_ids='qualified',suffix_results='_auc_roc', min_results=10);
    ch=ut.get_classes_with_results(d['original'].loc[d['mean'].index],suffix_results='_auc_roc');</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_unique" class="doc_header"><code>get_parameters_unique</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L334" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_unique</code>(<strong><code>df</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compact_parameters" class="doc_header"><code>compact_parameters</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L341" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compact_parameters</code>(<strong><code>df</code></strong>, <strong><code>number_characters</code></strong>=<em><code>1</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_with_default_values" class="doc_header"><code>replace_with_default_values</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L349" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_with_default_values</code>(<strong><code>df</code></strong>, <strong><code>parameters</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

