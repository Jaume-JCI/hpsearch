---

title: Experiment Utils


keywords: fastai
sidebar: home_sidebar

summary: "Helper functions for querying and retrieving results from past experiments"
description: "Helper functions for querying and retrieving results from past experiments"
nb_path: "nbs/utils/experiment_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utils/experiment_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

<span class="kn">from</span> <span class="nn">dsblocks.utils.nbdev_utils</span> <span class="kn">import</span> <span class="n">md</span>
<span class="kn">from</span> <span class="nn">hpsearch.examples.dummy_experiment_manager</span> <span class="kn">import</span> <span class="p">(</span><span class="n">DummyExperimentManager</span><span class="p">,</span> 
                                                        <span class="n">run_multiple_experiments</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">hpsearch.examples.complex_dummy_experiment_manager</span> <span class="kn">import</span> <span class="n">generate_data</span><span class="p">,</span> <span class="n">init_em</span>
<span class="kn">from</span> <span class="nn">hpsearch.config</span> <span class="kn">import</span> <span class="n">hp_defaults</span> <span class="k">as</span> <span class="n">dflt</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_data_exp_utils" class="doc_header"><code>generate_data_exp_utils</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_data_exp_utils</code>(<strong><code>name_folder</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">generate_data_exp_utils</span> <span class="p">(</span><span class="n">name_folder</span><span class="p">):</span>
    <span class="n">path_experiments</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;test_</span><span class="si">{</span><span class="n">name_folder</span><span class="si">}</span><span class="s1">/debug&#39;</span>
    <span class="n">manager_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path_experiments</span><span class="si">}</span><span class="s1">/managers&#39;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">DummyExperimentManager</span> <span class="p">(</span><span class="n">path_experiments</span><span class="o">=</span><span class="n">path_experiments</span><span class="p">,</span> <span class="n">manager_path</span><span class="o">=</span><span class="n">manager_path</span><span class="p">,</span>
                                 <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">run_multiple_experiments</span><span class="p">(</span><span class="n">em</span><span class="o">=</span><span class="n">em</span><span class="p">,</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">parameters_multiple_values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span> <span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">]))</span>
    <span class="n">run_multiple_experiments</span><span class="p">(</span><span class="n">em</span><span class="o">=</span><span class="n">em</span><span class="p">,</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span>
                             <span class="n">parameters_multiple_values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span> <span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">em</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Dataframe-I/O">Dataframe I/O<a class="anchor-link" href="#Dataframe-I/O"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_df" class="doc_header"><code>read_df</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_df</code>(<strong><code>path</code></strong>, <strong><code>name</code></strong>=<em><code>'experiments_data'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_df" class="doc_header"><code>write_df</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_df</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong><code>name</code></strong>=<em><code>'experiments_data'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_binary_df_if_not_exists" class="doc_header"><code>write_binary_df_if_not_exists</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L42" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_binary_df_if_not_exists</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong><code>name</code></strong>=<em><code>'experiments_data'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_experiment_data">get_experiment_data<a class="anchor-link" href="#get_experiment_data"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_data" class="doc_header"><code>get_experiment_data</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_data</code>(<strong><code>experiments</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Returns data stored from previous experiments in the form DataFrame.</p>
<p>If path_experiments is not given, it uses the default one.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_experiment_data" class="doc_header"><code>test_get_experiment_data</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L38" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_experiment_data</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_experiment_data</span> <span class="p">():</span>
    <span class="n">path_experiments</span> <span class="o">=</span> <span class="s1">&#39;get_experiment_data&#39;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data</span> <span class="p">(</span><span class="n">path_experiments</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_frame_equal</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">reference</span><span class="p">)</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_experiment_data</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_get_experiment_data
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">/tmp/ipykernel_14986/3002970389.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>tst<span class="ansi-blue-fg">.</span>run <span class="ansi-blue-fg">(</span>test_get_experiment_data<span class="ansi-blue-fg">,</span> tag<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;dummy&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/ds-blocks/dsblocks/utils/nbdev_utils.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self, test_func, data_func, do, include, debug, exclude, tag, show, store)</span>
<span class="ansi-green-intense-fg ansi-bold">    113</span>                 <span class="ansi-green-fg">if</span> show<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    114</span>                     print <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#39;running {name}&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 115</span><span class="ansi-red-fg">                 </span>test_func <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    116</span> 
<span class="ansi-green-intense-fg ansi-bold">    117</span> <span class="ansi-red-fg"># Cell</span>

<span class="ansi-green-fg">/tmp/ipykernel_14986/45032524.py</span> in <span class="ansi-cyan-fg">test_get_experiment_data</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-green-fg">def</span> test_get_experiment_data <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     path_experiments <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#39;get_experiment_data&#39;</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg">     </span>em <span class="ansi-blue-fg">=</span> generate_data <span class="ansi-blue-fg">(</span>path_experiments<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> 
<span class="ansi-green-intense-fg ansi-bold">      6</span>     df <span class="ansi-blue-fg">=</span> get_experiment_data <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/complex_dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">generate_data</span><span class="ansi-blue-fg">(name_folder, nruns, noise, verbose_model, verbose, parameters_multiple_values, parameters_single_value, other_parameters, em_args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>                                         verbose=verbose, **kwargs)
<span class="ansi-green-intense-fg ansi-bold">    124</span>     em<span class="ansi-blue-fg">.</span>remove_previous_experiments <span class="ansi-blue-fg">(</span>parent<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 125</span><span class="ansi-red-fg">     run_multiple_experiments (em=em, nruns=nruns, noise=noise, verbose=verbose,
</span><span class="ansi-green-intense-fg ansi-bold">    126</span>                               parameters_multiple_values<span class="ansi-blue-fg">=</span>parameters_multiple_values<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    127</span>                               parameters_single_value<span class="ansi-blue-fg">=</span>parameters_single_value<span class="ansi-blue-fg">,</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/complex_dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">run_multiple_experiments</span><span class="ansi-blue-fg">(**kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    108</span> <span class="ansi-red-fg"># Cell</span>
<span class="ansi-green-intense-fg ansi-bold">    109</span> <span class="ansi-green-fg">def</span> run_multiple_experiments <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 110</span><span class="ansi-red-fg">     </span>dummy_em<span class="ansi-blue-fg">.</span>run_multiple_experiments <span class="ansi-blue-fg">(</span>EM<span class="ansi-blue-fg">=</span>ComplexDummyExperimentManager<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    111</span> 
<span class="ansi-green-intense-fg ansi-bold">    112</span> <span class="ansi-green-fg">def</span> remove_previous_experiments <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">run_multiple_experiments</span><span class="ansi-blue-fg">(nruns, noise, verbose, rate, parameters_multiple_values, other_parameters, EM, em, em_args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>     other_parameters <span class="ansi-blue-fg">=</span> dict <span class="ansi-blue-fg">(</span>verbose<span class="ansi-blue-fg">=</span>verbose<span class="ansi-blue-fg">)</span> <span class="ansi-red-fg"># parameters that control other aspects that are not part of our experiment definition (a new experiment is not created if we assign different values for these parametsers)</span>
<span class="ansi-green-intense-fg ansi-bold">    222</span>     other_parameters<span class="ansi-blue-fg">.</span>update <span class="ansi-blue-fg">(</span>other_parameters_original<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 223</span><span class="ansi-red-fg">     em.grid_search (log_message=&#39;fixed rate, multiple epochs values&#39;,
</span><span class="ansi-green-intense-fg ansi-bold">    224</span>             parameters_single_value<span class="ansi-blue-fg">=</span>parameters_single_value<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    225</span>             parameters_multiple_values<span class="ansi-blue-fg">=</span>parameters_multiple_values<span class="ansi-blue-fg">,</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/experiment_manager.py</span> in <span class="ansi-cyan-fg">grid_search</span><span class="ansi-blue-fg">(self, parameters_multiple_values, parameters_single_value, other_parameters, info, run_numbers, random_search, load_previous, log_message, nruns, keep, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    636</span>                 self<span class="ansi-blue-fg">.</span>logger<span class="ansi-blue-fg">.</span>info <span class="ansi-blue-fg">(</span>log_message<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    637</span> 
<span class="ansi-green-fg">--&gt; 638</span><span class="ansi-red-fg">                 self.create_experiment_and_run (parameters=parameters, other_parameters=other_parameters,
</span><span class="ansi-green-intense-fg ansi-bold">    639</span>                                                 info=info, run_number=run_number, **kwargs)
<span class="ansi-green-intense-fg ansi-bold">    640</span> 

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/experiment_manager.py</span> in <span class="ansi-cyan-fg">create_experiment_and_run</span><span class="ansi-blue-fg">(self, parameters, other_parameters, info, em_args, run_number, log_message, stack_level, precision, experiment_number, repeat_experiment, remove_not_finished, only_remove_not_finished, check_finished, recompute_metrics, force_recompute_metrics, check_finished_if_interrupted, prev_epoch, use_previous_best, from_exp, skip_interrupted, use_last_result, run_if_not_interrumpted, use_last_result_from_dict, previous_model_file_name, model_extension, model_name, epoch_offset, name_best_model, name_last_epoch, min_iterations, use_process)</span>
<span class="ansi-green-intense-fg ansi-bold">    319</span>         path_csv <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">f&#39;{path_experiments}/experiments_data.csv&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    320</span>         path_pickle <span class="ansi-blue-fg">=</span> path_csv<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;csv&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;pk&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 321</span><span class="ansi-red-fg">         experiment_number, experiment_data = load_or_create_experiment_values (
</span><span class="ansi-green-intense-fg ansi-bold">    322</span>             path_csv, parameters, precision=precision)
<span class="ansi-green-intense-fg ansi-bold">    323</span> 

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/experiment_manager.py</span> in <span class="ansi-cyan-fg">load_or_create_experiment_values</span><span class="ansi-blue-fg">(path_csv, parameters, precision, logger)</span>
<span class="ansi-green-intense-fg ansi-bold">   1214</span>             experiment_data<span class="ansi-blue-fg">.</span>to_pickle<span class="ansi-blue-fg">(</span>path_pickle<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1215</span> 
<span class="ansi-green-fg">-&gt; 1216</span><span class="ansi-red-fg">         </span>experiment_data<span class="ansi-blue-fg">,</span> removed_defaults <span class="ansi-blue-fg">=</span> remove_defaults_from_experiment_data <span class="ansi-blue-fg">(</span>experiment_data<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1217</span> 
<span class="ansi-green-intense-fg ansi-bold">   1218</span>         <span class="ansi-red-fg"># Finds rows that match parameters. If the dataframe doesn&#39;t have any parameter with that name,</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/utils/organize_experiments.py</span> in <span class="ansi-cyan-fg">remove_defaults_from_experiment_data</span><span class="ansi-blue-fg">(experiment_data)</span>
<span class="ansi-green-intense-fg ansi-bold">     76</span> 
<span class="ansi-green-intense-fg ansi-bold">     77</span>     experiment_data_original <span class="ansi-blue-fg">=</span> experiment_data<span class="ansi-blue-fg">.</span>copy<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 78</span><span class="ansi-red-fg">     </span>parameters_names <span class="ansi-blue-fg">=</span> experiment_utils<span class="ansi-blue-fg">.</span>get_parameters_columns <span class="ansi-blue-fg">(</span>experiment_data<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     79</span>     parameters_data <span class="ansi-blue-fg">=</span> experiment_data_original<span class="ansi-blue-fg">[</span>parameters_names<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">     80</span>     changed_df <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/utils/experiment_utils.py</span> in <span class="ansi-cyan-fg">get_parameters_columns</span><span class="ansi-blue-fg">(experiment_data, only_not_null)</span>
<span class="ansi-green-intense-fg ansi-bold">     29</span> <span class="ansi-red-fg"># Cell</span>
<span class="ansi-green-intense-fg ansi-bold">     30</span> <span class="ansi-green-fg">def</span> get_parameters_columns <span class="ansi-blue-fg">(</span>experiment_data<span class="ansi-blue-fg">,</span> only_not_null<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 31</span><span class="ansi-red-fg">     </span>parameters <span class="ansi-blue-fg">=</span> dflt<span class="ansi-blue-fg">.</span>parameters_col
<span class="ansi-green-intense-fg ansi-bold">     32</span>     <span class="ansi-green-fg">if</span> only_not_null<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     33</span>         parameters_tuples <span class="ansi-blue-fg">=</span> experiment_data<span class="ansi-blue-fg">[</span>dflt<span class="ansi-blue-fg">.</span>parameters_col<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>columns<span class="ansi-blue-fg">.</span>get_level_values<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;dflt&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get-experiment-parameters-and-scores">get experiment parameters and scores<a class="anchor-link" href="#get-experiment-parameters-and-scores"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="get_parameters_columns">get_parameters_columns<a class="anchor-link" href="#get_parameters_columns"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_columns" class="doc_header"><code>get_parameters_columns</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L57" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_columns</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="get_experiment_parameters">get_experiment_parameters<a class="anchor-link" href="#get_experiment_parameters"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_parameters" class="doc_header"><code>get_experiment_parameters</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_parameters</code>(<strong><code>experiment_data</code></strong>, <strong><code>only_not_null</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="get_scores_columns">get_scores_columns<a class="anchor-link" href="#get_scores_columns"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scores_columns" class="doc_header"><code>get_scores_columns</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scores_columns</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>score_name</code></strong>=<em><code>None</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Determine the columnns that provide evaluation scores.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="get_experiment_scores">get_experiment_scores<a class="anchor-link" href="#get_experiment_scores"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_experiment_scores" class="doc_header"><code>get_experiment_scores</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L95" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_experiment_scores</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>score_name</code></strong>=<em><code>None</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>, <strong><code>remove_score_name</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-examples">Usage examples<a class="anchor-link" href="#Usage-examples"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_parameters_and_scores" class="doc_header"><code>test_get_parameters_and_scores</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_parameters_and_scores</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_parameters_and_scores</span> <span class="p">():</span>
    <span class="n">path_experiments</span> <span class="o">=</span> <span class="s1">&#39;test_get_parameters_and_scores&#39;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data</span> <span class="p">(</span><span class="n">path_experiments</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>

    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_parameters_columns</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;noise&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">]]</span>
    <span class="k">assert</span> <span class="n">get_parameters_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="n">mi_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">mi_offset</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can take only those which have at least some value that is not None.&#39;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">mi_offset</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;noise&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">]]</span>
    <span class="k">assert</span> <span class="n">get_parameters_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">only_not_null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- If only some elements are None for a given parameter, we still include it.&#39;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">mi_offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">mi_offset</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;noise&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">]]</span>
    <span class="k">assert</span> <span class="n">get_parameters_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">only_not_null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">==</span><span class="n">expected_result</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">mi_offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>

    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_experiment_parameters</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- Same as get_parameters_columns, but returning dataframe of parameter values.&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_experiment_parameters</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;noise&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">]]</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_scores_columns</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- Retrieve all columns that have scores, for all runs&#39;</span><span class="p">)</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">scores_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>
                       <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
    <span class="k">assert</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- Retrieve all columns for given score name, for all runs&#39;</span><span class="p">)</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> 
                       <span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> 
                       <span class="p">(</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
    <span class="k">assert</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- Retrieve all columns for given score name, for given runs&#39;</span><span class="p">)</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">scores_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">]</span> 
                       <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
    <span class="k">assert</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_experiment_scores</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- Same, but returning dataframe with selected scores values:&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_experiment_scores</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">get_experiment_scores</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">get_experiment_scores</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can remove the metric name and only keep the run number in each column:&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_experiment_scores</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">remove_score_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_scores_columns, first usage example: we do not indicate the name of the score</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">scores_col</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span> 
                       <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
    <span class="k">assert</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">==</span><span class="n">expected_result</span>
    
    <span class="c1"># ************************************************************</span>
    <span class="c1"># get_scores_columns, second usage: we indicate the name of the score</span>
    <span class="c1"># ************************************************************</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_scores_columns</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">)</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">scores_col</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">expected_result</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_parameters_and_scores</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_scores_names">get_scores_names<a class="anchor-link" href="#get_scores_names"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_scores_names" class="doc_header"><code>get_scores_names</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_scores_names</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>, <strong><code>experiment</code></strong>=<em><code>None</code></em>, <strong><code>only_valid</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Determine the names of the scores included in experiment data.</p>
<p>If run_number is provided, we provide the scores stored for that run number. If, in addition to this,
experiment is provided, and only_valid=True, we provide only the scores that are not NaN for the given
experiment number.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_scores_names" class="doc_header"><code>test_get_scores_names</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L139" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_scores_names</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_scores_names</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;get_scores_names&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">scores_names</span> <span class="o">=</span> <span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">scores_names</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">scores_names</span><span class="o">=</span><span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">scores_names</span><span class="p">))</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>

    <span class="c1"># test when only some scores are valid</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">scores_col</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">scores_names</span><span class="o">=</span><span class="n">get_scores_names</span> <span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">scores_names</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">scores_names</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_scores_names</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_monitored_training_metrics">get_monitored_training_metrics<a class="anchor-link" href="#get_monitored_training_metrics"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_monitored_training_metrics" class="doc_header"><code>get_monitored_training_metrics</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L125" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_monitored_training_metrics</code>(<strong><code>experiment</code></strong>, <strong><code>run_number</code></strong>=<em><code>0</code></em>, <strong><code>history_file_name</code></strong>=<em><code>'model_history.pk'</code></em>, <strong><code>path_results</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_monitored_training_metrics" class="doc_header"><code>test_get_monitored_training_metrics</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L161" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_monitored_training_metrics</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_monitored_training_metrics</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;get_monitored_training_metrics&#39;</span><span class="p">)</span>
    
    <span class="n">monitored_metrics</span> <span class="o">=</span> <span class="n">get_monitored_training_metrics</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">monitored_metrics</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">monitored_metrics</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_monitored_training_metrics</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_runs_with_results">get_runs_with_results<a class="anchor-link" href="#get_runs_with_results"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_runs_with_results" class="doc_header"><code>get_runs_with_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L138" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_runs_with_results</code>(<strong><code>experiment_data</code></strong>=<em><code>None</code></em>, <strong><code>score_name</code></strong>=<em><code>None</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Gets the list of run_number for whom there are results in experiment_data.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_runs_with_results" class="doc_header"><code>test_get_runs_with_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L171" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_runs_with_results</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_runs_with_results</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data</span> <span class="p">(</span><span class="s1">&#39;get_runs_with_results&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="c1"># we need to introduce experiment_data df, and score_name</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_runs_with_results</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">==</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
    
    <span class="c1"># we can also restrict to certain run_number</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_runs_with_results</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">==</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_runs_with_results</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="get_parameters_unique">get_parameters_unique<a class="anchor-link" href="#get_parameters_unique"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_parameters_unique" class="doc_header"><code>get_parameters_unique</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L151" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_parameters_unique</code>(<strong><code>df</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_get_parameters_unique" class="doc_header"><code>test_get_parameters_unique</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L187" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_get_parameters_unique</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_get_parameters_unique</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;get_parameters_unique&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    
    <span class="c1"># keeps only those parameters with more than one value,</span>
    <span class="c1"># removing &#39;noise&#39; in this case, since it has the same value in all rows</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_parameters_unique</span> <span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">28</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> 
                         <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_get_parameters_unique</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="compact_parameters">compact_parameters<a class="anchor-link" href="#compact_parameters"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compact_parameters" class="doc_header"><code>compact_parameters</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L172" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compact_parameters</code>(<strong><code>df</code></strong>, <strong><code>number_characters</code></strong>=<em><code>1</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_compact_parameters" class="doc_header"><code>test_compact_parameters</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L201" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_compact_parameters</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_compact_parameters</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;compact_parameters&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    
    <span class="n">result</span> <span class="o">=</span> <span class="n">compact_parameters</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">number_characters</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ep&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span>   <span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span>   <span class="s1">&#39;Of&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ra&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Da&#39;</span><span class="p">,</span>  <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Da&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Da&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Da&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Da&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Fi&#39;</span><span class="p">,</span>  <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Fi&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Fi&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Fi&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Fi&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ti&#39;</span><span class="p">,</span>  <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ti&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ti&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ti&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span>  <span class="s1">&#39;run_info&#39;</span><span class="p">,</span>   <span class="s1">&#39;Ti&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span>  <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">,</span>  <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span>    <span class="s1">&#39;scores&#39;</span><span class="p">,</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">)]</span>

    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;epochs&#39;</span><span class="p">:</span> <span class="s1">&#39;Ep&#39;</span><span class="p">,</span> <span class="s1">&#39;noise&#39;</span><span class="p">:</span> <span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="s1">&#39;Of&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="s1">&#39;Ra&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;Da&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;finished&#39;</span><span class="p">:</span> <span class="s1">&#39;Fi&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;Ti&#39;</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">:</span> <span class="s1">&#39;TeAc&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">:</span> <span class="s1">&#39;VaAc&#39;</span><span class="p">}</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_compact_parameters</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="replace_with_default_values">replace_with_default_values<a class="anchor-link" href="#replace_with_default_values"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_with_default_values" class="doc_header"><code>replace_with_default_values</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_with_default_values</code>(<strong><code>df</code></strong>, <strong><code>parameters</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_replace_with_default_values" class="doc_header"><code>test_replace_with_default_values</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L243" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_replace_with_default_values</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_replace_with_default_values</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;replace_with_default_values&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">df</span><span class="o">=</span><span class="n">replace_with_default_values</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">mi_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">mi_epoch</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="p">([</span><span class="mf">5.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="mf">10.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="mf">100.</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_replace_with_default_values</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="remove_defaults">remove_defaults<a class="anchor-link" href="#remove_defaults"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_defaults" class="doc_header"><code>remove_defaults</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L203" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_defaults</code>(<strong><code>parameters</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_remove_defaults" class="doc_header"><code>test_remove_defaults</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L254" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_remove_defaults</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_remove_defaults</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">init_em</span> <span class="p">(</span><span class="s1">&#39;remove_defaults&#39;</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">dict_results</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">create_experiment_and_run</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">})</span>
    
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">remove_defaults</span> <span class="p">({</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">parameters</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">}</span>
    
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">remove_defaults</span> <span class="p">({</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">parameters</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">}</span>
    
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">remove_defaults</span> <span class="p">({</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.000001</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">parameters</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.000001</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
    
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">remove_defaults</span> <span class="p">({</span><span class="s1">&#39;offset&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.000001</span><span class="p">,</span> <span class="s1">&#39;epochs&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">parameters</span><span class="o">==</span><span class="p">{</span><span class="s1">&#39;rate&#39;</span><span class="p">:</span> <span class="mf">0.000001</span><span class="p">}</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_remove_defaults</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="find_rows_with_parameters_dict">find_rows_with_parameters_dict<a class="anchor-link" href="#find_rows_with_parameters_dict"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_rows_with_parameters_dict" class="doc_header"><code>find_rows_with_parameters_dict</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L213" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_rows_with_parameters_dict</code>(<strong><code>experiment_data</code></strong>, <strong><code>parameters_dict</code></strong>, <strong><code>create_if_not_exists</code></strong>=<em><code>True</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>ignore_keys</code></strong>=<em><code>[]</code></em>, <strong><code>precision</code></strong>=<em><code>1e-10</code></em>)</p>
</blockquote>
<p>Finds rows that match parameters.</p>
<p>If the dataframe doesn't have any parameter with that name, a new column
is created and changed_dataframe is set to True.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_find_rows_with_parameters_dict" class="doc_header"><code>test_find_rows_with_parameters_dict</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L273" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_find_rows_with_parameters_dict</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_find_rows_with_parameters_dict</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;find_rows_with_parameters_dict&#39;</span><span class="p">)</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span> <span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">))</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[]</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">changed_dataframe</span>
    
    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">matching_rows</span> <span class="o">==</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>
    
    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.6</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">ignore_keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;epochs&#39;</span><span class="p">])</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>

    <span class="n">mi_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="n">mi_rate</span><span class="p">]</span><span class="o">=</span><span class="mf">0.00011</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">0.0001</span><span class="p">)</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">find_rows_with_parameters_dict</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">dict</span> <span class="p">(</span><span class="n">new_par</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">matching_rows</span><span class="p">,</span> <span class="n">changed_dataframe</span><span class="p">,</span> <span class="n">matching_all_condition</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">assert</span> <span class="n">changed_dataframe</span>
    <span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[]</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="s1">&#39;new_par&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">assert</span> <span class="n">matching_rows</span><span class="o">==</span><span class="p">[]</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_find_rows_with_parameters_dict</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_find_rows_with_parameters_dict
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="summarize_results">summarize_results<a class="anchor-link" href="#summarize_results"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summarize_results" class="doc_header"><code>summarize_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L265" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summarize_results</code>(<strong><code>intersection</code></strong>=<em><code>False</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>score_name</code></strong>=<em><code>None</code></em>, <strong><code>min_results</code></strong>=<em><code>0</code></em>, <strong><code>run_number</code></strong>=<em><code>None</code></em>, <strong><code>parameters</code></strong>=<em><code>None</code></em>, <strong><code>include_parameters</code></strong>=<em><code>True</code></em>, <strong><code>include_num_results</code></strong>=<em><code>True</code></em>, <strong><code>other_columns</code></strong>=<em><code>None</code></em>, <strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>ascending</code></strong>=<em><code>False</code></em>, <strong><code>sort_key</code></strong>=<em><code>'mean'</code></em>, <strong><code>stats</code></strong>=<em><code>['mean', 'median', 'min', 'max', 'std']</code></em>)</p>
</blockquote>
<p>Obtains summary scores for the desired list of experiments.</p>
<p>Uses the experiment_data csv for that purpose.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>intersection</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>experiments</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>score_name</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>min_results</code></strong></td>
<td><code>int</code></td>
<td><code>0</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>run_number</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>parameters</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>include_parameters</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>include_num_results</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>other_columns</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>data</code></strong></td>
<td></td>
<td><code>None</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>ascending</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>sort_key</code></strong></td>
<td><code>str</code></td>
<td><code>mean</code></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>stats</code></strong></td>
<td><code>list</code></td>
<td><code>(mean, median, min, max, std)</code></td>
<td>stats = ['mean','median','rank','min','max','std'],</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_summarize_results" class="doc_header"><code>test_summarize_results</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L312" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_summarize_results</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_summarize_results</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">init_em</span> <span class="p">(</span><span class="s1">&#39;summarize_results&#39;</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.02</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarize_results</span> <span class="p">()</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="n">mi_num_results</span> <span class="o">=</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">num_results_col</span><span class="p">,</span> <span class="s1">&#39;num_results&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="p">[</span><span class="n">mi_num_results</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can restrict the metric to be the indicated one:&#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarize_results</span> <span class="p">(</span><span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="p">[</span><span class="n">mi_num_results</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span><span class="s1">&#39;median&#39;</span><span class="p">,</span><span class="s1">&#39;min&#39;</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">,</span><span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">==</span><span class="nb">set</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">dflt</span><span class="o">.</span><span class="n">stats_col</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can also restrict the stats to be provided:&#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarize_results</span> <span class="p">(</span><span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span><span class="s1">&#39;min&#39;</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">])</span><span class="o">==</span><span class="nb">set</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">dflt</span><span class="o">.</span><span class="n">stats_col</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can filter those results that have less than X runs: &#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarize_results</span> <span class="p">(</span><span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="n">min_results</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="p">[</span><span class="n">mi_num_results</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">5</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;- We can filter by experiment number and/or number of results, and retrieve the original dataframe,&#39;</span>
        <span class="s1">&#39;plus new columns with stats: &#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarize_results</span> <span class="p">(</span><span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">,</span> <span class="n">experiments</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">summary</span><span class="o">.</span><span class="n">index</span><span class="o">==</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="k">assert</span> <span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">summary</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span>
            <span class="nb">sorted</span><span class="p">([</span><span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">,</span> <span class="s1">&#39;num_results&#39;</span><span class="p">,</span> <span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]))</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stats&#39;</span><span class="p">,</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">]</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_summarize_results</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_summarize_results
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.32
epoch 1: accuracy: 0.34
epoch 2: accuracy: 0.36000000000000004
epoch 3: accuracy: 0.38000000000000006
epoch 4: accuracy: 0.4000000000000001
epoch 5: accuracy: 0.4200000000000001
epoch 6: accuracy: 0.4400000000000001
epoch 7: accuracy: 0.46000000000000013
epoch 8: accuracy: 0.48000000000000015
epoch 9: accuracy: 0.5000000000000001
fitting model with 10 epochs
epoch 0: accuracy: 0.32
epoch 1: accuracy: 0.34
epoch 2: accuracy: 0.36000000000000004
epoch 3: accuracy: 0.38000000000000006
epoch 4: accuracy: 0.4000000000000001
epoch 5: accuracy: 0.4200000000000001
epoch 6: accuracy: 0.4400000000000001
epoch 7: accuracy: 0.46000000000000013
epoch 8: accuracy: 0.48000000000000015
epoch 9: accuracy: 0.5000000000000001
</pre>
</div>
</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<ul>
<li>We need to indicate the metric to be retrieved, otherwise it will count as many results as num_results*num_metrics: </li>
</ul>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 3 experiments with at least 6 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>offset</th>
      <th>rate</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>0.3</td>
      <td>0.020</td>
      <td>6</td>
      <td>0.633333</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.2</td>
      <td>0.001</td>
      <td>15</td>
      <td>0.440000</td>
    </tr>
    <tr>
      <th>0</th>
      <td>0.1</td>
      <td>NaN</td>
      <td>9</td>
      <td>0.433333</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<ul>
<li>The metric is indicated with <code>_</code> at the beginning: </li>
</ul>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 3 experiments with at least 2 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>offset</th>
      <th>rate</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>0.3</td>
      <td>0.020</td>
      <td>2</td>
      <td>0.50</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.2</td>
      <td>0.001</td>
      <td>5</td>
      <td>0.21</td>
    </tr>
    <tr>
      <th>0</th>
      <td>0.1</td>
      <td>NaN</td>
      <td>3</td>
      <td>0.20</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<ul>
<li>We can filter those results that have less than X runs: </li>
</ul>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1 out of 3 experiments have 5 runs completed
total data examined: 1 experiments with at least 5 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>offset</th>
      <th>rate</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.2</td>
      <td>0.001</td>
      <td>5</td>
      <td>0.21</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<ul>
<li>We can filter by experiment number and/or number of results, and retrieve the original dataframe,plus new columns with stats: </li>
</ul>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 2 experiments with at least 2 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>offset</th>
      <th>0_validation_accuracy</th>
      <th>0_test_accuracy</th>
      <th>time_0</th>
      <th>date</th>
      <th>0_finished</th>
      <th>1_validation_accuracy</th>
      <th>1_test_accuracy</th>
      <th>time_1</th>
      <th>1_finished</th>
      <th>...</th>
      <th>time_4</th>
      <th>4_finished</th>
      <th>num_results</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
      <th>std</th>
      <th>median</th>
      <th>rank</th>
      <th>good</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.1</td>
      <td>0.2</td>
      <td>0.1</td>
      <td>0.002003</td>
      <td>15:54:43.969089</td>
      <td>True</td>
      <td>0.2</td>
      <td>0.1</td>
      <td>0.001967</td>
      <td>True</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3</td>
      <td>0.2</td>
      <td>0.2</td>
      <td>0.2</td>
      <td>0.0</td>
      <td>0.2</td>
      <td>0.666667</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.3</td>
      <td>0.5</td>
      <td>0.4</td>
      <td>0.002099</td>
      <td>15:54:44.225272</td>
      <td>True</td>
      <td>0.5</td>
      <td>0.4</td>
      <td>0.002191</td>
      <td>True</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.0</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>2 rows  31 columns</p>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="query">query<a class="anchor-link" href="#query"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="query" class="doc_header"><code>query</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L385" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>query</code>(<strong><code>path_experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder_experiments</code></strong>=<em><code>None</code></em>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>parameters_fixed</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_variable</code></strong>=<em><code>{}</code></em>, <strong><code>parameters_all</code></strong>=<em><code>[]</code></em>, <strong><code>exact_match</code></strong>=<em><code>True</code></em>, <strong><code>query_other_parameters</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_query" class="doc_header"><code>test_query</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L359" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_query</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_query</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">generate_data_exp_utils</span> <span class="p">(</span><span class="s1">&#39;query&#39;</span><span class="p">)</span>
        
    <span class="n">summary</span> <span class="o">=</span> <span class="n">query</span> <span class="p">(</span><span class="n">parameters_fixed</span><span class="o">=</span><span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">empty</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;the dataframe only has mean. Results are sorted by mean score&#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">query</span> <span class="p">(</span><span class="n">parameters_fixed</span><span class="o">=</span><span class="nb">dict</span> <span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">par</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">parameter</span><span class="p">:</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">parameters_col</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">stat</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">statv</span><span class="p">:</span> <span class="p">(</span><span class="n">dflt</span><span class="o">.</span><span class="n">stats_col</span><span class="p">,</span> <span class="s1">&#39;test_accuracy&#39;</span><span class="p">,</span> <span class="n">statv</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">9</span> <span class="ow">and</span> <span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;rate&#39;</span><span class="p">)]</span><span class="o">==</span><span class="mf">0.0001</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="ow">and</span> 
            <span class="nb">len</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">3</span> <span class="ow">and</span> 
            <span class="n">summary</span><span class="p">[</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="n">summary</span><span class="p">[</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
            <span class="ow">and</span> <span class="n">summary</span><span class="p">[</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">summary</span><span class="p">[</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;The second output d contains a field &quot;stats&quot; which is a dataframe. Results are sorted by mean score&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;stats&#39;</span><span class="p">,</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">==</span><span class="p">[</span>
        <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;We can request parameter be in specific list of values&#39;</span><span class="p">)</span>   
    <span class="n">summary</span> <span class="o">=</span> <span class="n">query</span> <span class="p">(</span><span class="n">parameters_fixed</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                  <span class="n">parameters_variable</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]))</span>
    <span class="k">assert</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;epochs&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    
    <span class="n">md</span> <span class="p">(</span><span class="s1">&#39;If we want a value that is the default, we need to indicate None&#39;</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">query</span> <span class="p">(</span><span class="n">parameters_fixed</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">),</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
              <span class="n">parameters_variable</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">epochs</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]))</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;epochs&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="n">par</span><span class="p">(</span><span class="s1">&#39;epochs&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_query</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_query
total data examined: 0 experiments with at least nan runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>the dataframe only has mean. Results are sorted by mean score</p>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 9 experiments with at least 15 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>epochs</th>
      <th>offset</th>
      <th>rate</th>
      <th>noise</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>11</th>
      <td>5.0</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.731242</td>
    </tr>
    <tr>
      <th>14</th>
      <td>10.0</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.693155</td>
    </tr>
    <tr>
      <th>17</th>
      <td>NaN</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.679728</td>
    </tr>
    <tr>
      <th>10</th>
      <td>5.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.548471</td>
    </tr>
    <tr>
      <th>13</th>
      <td>10.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.505715</td>
    </tr>
    <tr>
      <th>16</th>
      <td>NaN</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.481352</td>
    </tr>
    <tr>
      <th>9</th>
      <td>5.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.432128</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.386496</td>
    </tr>
    <tr>
      <th>15</th>
      <td>NaN</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.380060</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>The second output d contains a field "stats" which is a dataframe. Results are sorted by mean score</p>

</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>epochs</th>
      <th>offset</th>
      <th>rate</th>
      <th>noise</th>
      <th>num_results</th>
      <th>mean</th>
      <th>median</th>
      <th>rank</th>
      <th>min</th>
      <th>max</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>11</th>
      <td>5.0</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.731242</td>
      <td>0.717476</td>
      <td>1.066667</td>
      <td>0.412303</td>
      <td>1.0</td>
      <td>0.216686</td>
    </tr>
    <tr>
      <th>14</th>
      <td>10.0</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.693155</td>
      <td>0.581141</td>
      <td>2.533333</td>
      <td>0.288745</td>
      <td>1.0</td>
      <td>0.260617</td>
    </tr>
    <tr>
      <th>17</th>
      <td>NaN</td>
      <td>0.6</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.679728</td>
      <td>0.670236</td>
      <td>3.666667</td>
      <td>0.312746</td>
      <td>1.0</td>
      <td>0.263702</td>
    </tr>
    <tr>
      <th>10</th>
      <td>5.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.548471</td>
      <td>0.426426</td>
      <td>2.733333</td>
      <td>0.095076</td>
      <td>1.0</td>
      <td>0.346302</td>
    </tr>
    <tr>
      <th>13</th>
      <td>10.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.505715</td>
      <td>0.315252</td>
      <td>4.200000</td>
      <td>0.126844</td>
      <td>1.0</td>
      <td>0.367088</td>
    </tr>
    <tr>
      <th>16</th>
      <td>NaN</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.481352</td>
      <td>0.298419</td>
      <td>5.466667</td>
      <td>0.065535</td>
      <td>1.0</td>
      <td>0.390327</td>
    </tr>
    <tr>
      <th>9</th>
      <td>5.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.432128</td>
      <td>0.236860</td>
      <td>4.000000</td>
      <td>0.000000</td>
      <td>1.0</td>
      <td>0.425926</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.386496</td>
      <td>0.119425</td>
      <td>5.533333</td>
      <td>0.000000</td>
      <td>1.0</td>
      <td>0.451545</td>
    </tr>
    <tr>
      <th>15</th>
      <td>NaN</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.380060</td>
      <td>0.152559</td>
      <td>6.800000</td>
      <td>0.000000</td>
      <td>1.0</td>
      <td>0.457517</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>We can request parameter be in specific list of values</p>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 4 experiments with at least 15 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>epochs</th>
      <th>offset</th>
      <th>rate</th>
      <th>noise</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>5.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.548471</td>
    </tr>
    <tr>
      <th>13</th>
      <td>10.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.505715</td>
    </tr>
    <tr>
      <th>9</th>
      <td>5.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.432128</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.386496</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>If we want a value that is the default, we need to indicate None</p>

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>total data examined: 4 experiments with at least 15 runs done for each one
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>epochs</th>
      <th>offset</th>
      <th>rate</th>
      <th>noise</th>
      <th>num_results</th>
      <th>mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13</th>
      <td>10.0</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.505715</td>
    </tr>
    <tr>
      <th>16</th>
      <td>NaN</td>
      <td>0.3</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.481352</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10.0</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.386496</td>
    </tr>
    <tr>
      <th>15</th>
      <td>NaN</td>
      <td>0.1</td>
      <td>0.0001</td>
      <td>0.1</td>
      <td>15</td>
      <td>0.380060</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="summary">summary<a class="anchor-link" href="#summary"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summary" class="doc_header"><code>summary</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/utils/experiment_utils.py#L444" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summary</code>(<strong><code>df</code></strong>, <strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>score</code></strong>=<em><code>None</code></em>, <strong><code>compact</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Usage-example">Usage example<a class="anchor-link" href="#Usage-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_summary" class="doc_header"><code>test_summary</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/utils/test_experiment_utils.py#L399" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_summary</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_summary</span> <span class="p">():</span>
    <span class="n">em</span> <span class="o">=</span> <span class="n">init_em</span> <span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.001</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">run_multiple_repetitions</span> <span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.02</span><span class="p">),</span> <span class="n">nruns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">get_experiment_data</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">summary</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="s1">&#39;validation_accuracy&#39;</span><span class="p">)</span>
    <span class="n">display</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;rate&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
    <span class="n">em</span><span class="o">.</span><span class="n">remove_previous_experiments</span> <span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_summary</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_summary
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.11
epoch 1: accuracy: 0.12
epoch 2: accuracy: 0.13
epoch 3: accuracy: 0.14
epoch 4: accuracy: 0.15000000000000002
epoch 5: accuracy: 0.16000000000000003
epoch 6: accuracy: 0.17000000000000004
epoch 7: accuracy: 0.18000000000000005
epoch 8: accuracy: 0.19000000000000006
epoch 9: accuracy: 0.20000000000000007
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.201
epoch 1: accuracy: 0.202
epoch 2: accuracy: 0.203
epoch 3: accuracy: 0.20400000000000001
epoch 4: accuracy: 0.20500000000000002
epoch 5: accuracy: 0.20600000000000002
epoch 6: accuracy: 0.20700000000000002
epoch 7: accuracy: 0.20800000000000002
epoch 8: accuracy: 0.20900000000000002
epoch 9: accuracy: 0.21000000000000002
fitting model with 10 epochs
epoch 0: accuracy: 0.32
epoch 1: accuracy: 0.34
epoch 2: accuracy: 0.36000000000000004
epoch 3: accuracy: 0.38000000000000006
epoch 4: accuracy: 0.4000000000000001
epoch 5: accuracy: 0.4200000000000001
epoch 6: accuracy: 0.4400000000000001
epoch 7: accuracy: 0.46000000000000013
epoch 8: accuracy: 0.48000000000000015
epoch 9: accuracy: 0.5000000000000001
fitting model with 10 epochs
epoch 0: accuracy: 0.32
epoch 1: accuracy: 0.34
epoch 2: accuracy: 0.36000000000000004
epoch 3: accuracy: 0.38000000000000006
epoch 4: accuracy: 0.4000000000000001
epoch 5: accuracy: 0.4200000000000001
epoch 6: accuracy: 0.4400000000000001
epoch 7: accuracy: 0.46000000000000013
epoch 8: accuracy: 0.48000000000000015
epoch 9: accuracy: 0.5000000000000001
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea "><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>offset</th>
      <th>rate</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.1</td>
      <td>NaN</td>
      <td>0.20</td>
      <td>0.20</td>
      <td>0.20</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.2</td>
      <td>0.001</td>
      <td>0.21</td>
      <td>0.21</td>
      <td>0.21</td>
      <td>0.21</td>
      <td>0.21</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.3</td>
      <td>0.020</td>
      <td>0.50</td>
      <td>0.50</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>


