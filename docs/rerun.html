---

title: Re-run previous experiments with new parameters


keywords: fastai
sidebar: home_sidebar

summary: "Utility that allows to:"
description: "Utility that allows to:"
nb_path: "nbs/tools/rerun.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/tools/rerun.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">hpsearch.examples.complex_dummy_experiment_manager</span> <span class="kn">import</span> <span class="n">generate_data</span><span class="p">,</span> <span class="n">init_em</span>
<span class="kn">import</span> <span class="nn">hpsearch.utils.experiment_utils</span> <span class="k">as</span> <span class="nn">ut</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="rerun">rerun<a class="anchor-link" href="#rerun"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rerun" class="doc_header"><code>rerun</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tools/rerun.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rerun</code>(<strong><code>experiments</code></strong>=<em><code>None</code></em>, <strong><code>folder</code></strong>=<em><code>None</code></em>, <strong><code>epochs</code></strong>=<em><code>None</code></em>, <strong><code>runs</code></strong>=<em><code>None</code></em>, <strong><code>unfinished</code></strong>=<em><code>False</code></em>, <strong><code>verbose</code></strong>=<em><code>None</code></em>, <strong><code>debug</code></strong>=<em><code>False</code></em>, <strong><code>em_attrs</code></strong>=<em><code>None</code></em>, <strong><code>store</code></strong>=<em><code>False</code></em>, <strong><code>from_dict</code></strong>=<em><code>False</code></em>, <strong><code>range_exp</code></strong>=<em><code>None</code></em>, <strong><code>min_iterations</code></strong>=<em><code>None</code></em>, <strong><code>manager_path</code></strong>=<em><code>'em_obj'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="parse_arguments_and_run">parse_arguments_and_run<a class="anchor-link" href="#parse_arguments_and_run"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_args" class="doc_header"><code>parse_args</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tools/rerun.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_args</code>(<strong><code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_arguments_and_run" class="doc_header"><code>parse_arguments_and_run</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tools/rerun.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_arguments_and_run</code>(<strong><code>args</code></strong>, <strong><code>em_attrs</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="main" class="doc_header"><code>main</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tools/rerun.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>main</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="usage:-performing-more-runs-on-previous-experiments">usage: performing more runs on previous experiments<a class="anchor-link" href="#usage:-performing-more-runs-on-previous-experiments"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_parse_arguments_and_run_more_runs" class="doc_header"><code>test_parse_arguments_and_run_more_runs</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/tools/test_rerun.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_parse_arguments_and_run_more_runs</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_parse_arguments_and_run_more_runs</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_parse_arguments_and_run_more_runs
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-green-fg">/tmp/ipykernel_101735/457577691.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>tst<span class="ansi-blue-fg">.</span>run <span class="ansi-blue-fg">(</span>test_parse_arguments_and_run_more_runs<span class="ansi-blue-fg">,</span> tag<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;dummy&#39;</span><span class="ansi-blue-fg">,</span> debug<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/ds-blocks/dsblocks/utils/nbdev_utils.py</span> in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg">(self, test_func, data_func, do, include, debug, exclude, tag, show, store)</span>
<span class="ansi-green-intense-fg ansi-bold">    113</span>                 <span class="ansi-green-fg">if</span> show<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    114</span>                     print <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#39;running {name}&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 115</span><span class="ansi-red-fg">                 </span>test_func <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    116</span> 
<span class="ansi-green-intense-fg ansi-bold">    117</span> <span class="ansi-red-fg"># Cell</span>

<span class="ansi-green-fg">/tmp/ipykernel_101735/3688882243.py</span> in <span class="ansi-cyan-fg">test_parse_arguments_and_run_more_runs</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg">#export tests.tools.test_rerun</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-green-fg">def</span> test_parse_arguments_and_run_more_runs <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg">     em = generate_data (&#39;parse_arguments_and_run_more_runs&#39;, 
</span><span class="ansi-green-intense-fg ansi-bold">      4</span>                         root_folder=&#39;newroot&#39;)
<span class="ansi-green-intense-fg ansi-bold">      5</span> 

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/complex_dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">generate_data</span><span class="ansi-blue-fg">(name_folder, nruns, noise, verbose_model, verbose, parameters_multiple_values, parameters_single_value, other_parameters, em_args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    116</span>     path_experiments <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">f&#39;test_{name_folder}&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    117</span>     manager_path <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">f&#39;{path_experiments}/managers&#39;</span>
<span class="ansi-green-fg">--&gt; 118</span><span class="ansi-red-fg">     em = ComplexDummyExperimentManager (path_experiments=path_experiments, manager_path=manager_path,
</span><span class="ansi-green-intense-fg ansi-bold">    119</span>                                         verbose=verbose, **kwargs)
<span class="ansi-green-intense-fg ansi-bold">    120</span>     em<span class="ansi-blue-fg">.</span>remove_previous_experiments <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/complex_dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, model_file_name, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     20</span> 
<span class="ansi-green-intense-fg ansi-bold">     21</span>     <span class="ansi-green-fg">def</span> __init__ <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> model_file_name<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;model_weights.pk&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 22</span><span class="ansi-red-fg">         </span>super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__ <span class="ansi-blue-fg">(</span>model_file_name<span class="ansi-blue-fg">=</span>model_file_name<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     23</span>         self<span class="ansi-blue-fg">.</span>raise_error_if_run <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>
<span class="ansi-green-intense-fg ansi-bold">     24</span>         self<span class="ansi-blue-fg">.</span>desired_path_results_previous_experiment <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">None</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/examples/dummy_experiment_manager.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, path_experiments, root, metric, op, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    138</span>         <span class="ansi-green-fg">if</span> path_experiments <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span> path_experiments <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">f&#39;{os.path.dirname(hpsearch.__file__)}/../results&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    139</span> 
<span class="ansi-green-fg">--&gt; 140</span><span class="ansi-red-fg">         super().__init__ (path_experiments=path_experiments,
</span><span class="ansi-green-intense-fg ansi-bold">    141</span>                           root<span class="ansi-blue-fg">=</span>root<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    142</span>                           metric<span class="ansi-blue-fg">=</span>metric<span class="ansi-blue-fg">,</span>

<span class="ansi-green-fg">~/jaume/workspace/remote/hpsearch/hpsearch/experiment_manager.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, allow_base_class, path_experiments, defaults, root, metric, op, alternative_root_path, path_data, name_model_history, model_file_name, name_epoch, result_file, target_model_file, destination_model_file, root_folder, manager_path, non_pickable_fields, avoid_saving_fields, logger, verbose, name_logger)</span>
<span class="ansi-green-intense-fg ansi-bold">     99</span>             self<span class="ansi-blue-fg">.</span>root <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>root_folder
<span class="ansi-green-intense-fg ansi-bold">    100</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>root <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span> self<span class="ansi-blue-fg">.</span>root_folder <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span> self<span class="ansi-blue-fg">.</span>root <span class="ansi-blue-fg">!=</span> self<span class="ansi-blue-fg">.</span>root_folder<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 101</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">raise</span> ValueError <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;self.root != self.root_folder&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    102</span> 
<span class="ansi-green-intense-fg ansi-bold">    103</span>         self.registered_name = (f&#39;{class_name}-default&#39; if (self.root_folder is None

<span class="ansi-red-fg">ValueError</span>: self.root != self.root_folder</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Increasing-the-number-of-epochs-used-in-previous-experiments">Increasing the number of epochs used in previous experiments<a class="anchor-link" href="#Increasing-the-number-of-epochs-used-in-previous-experiments"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_parse_arguments_and_run_more_epochs" class="doc_header"><code>test_parse_arguments_and_run_more_epochs</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/tools/test_rerun.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_parse_arguments_and_run_more_epochs</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_parse_arguments_and_run_more_epochs</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Storing-results-from-interrupted-experiments">Storing results from interrupted experiments<a class="anchor-link" href="#Storing-results-from-interrupted-experiments"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_parse_arguments_and_run_store" class="doc_header"><code>test_parse_arguments_and_run_store</code><a href="https://github.com/Jaume-JCI/hpsearch/tree/master/hpsearch/tests/tools/test_rerun.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_parse_arguments_and_run_store</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_parse_arguments_and_run_store</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


